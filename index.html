<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LPG Gas Trader's Policy Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .scrollable-frame {
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }
        .result-text {
            white-space: pre-wrap;
            font-family: Arial, sans-serif;
            font-size: 14px;
            border: 1px solid #ccc;
            padding: 10px;
            height: 500px;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-gray-100 flex justify-center items-center min-h-screen">
    <div class="w-full max-w-2xl bg-white p-6 rounded-lg shadow-lg">
        <h1 class="text-2xl font-bold text-center mb-4">LPG Gas Trader's Policy Calculator</h1>
        <div class="scrollable-frame">
            <!-- Section I: Fire & Allied Perils (Compulsory) -->
            <h2 class="text-lg font-bold mt-4">Section I: Fire & Allied Perils (Compulsory)</h2>
            <div class="flex items-center mb-2">
                <label class="w-40">Premise Type:</label>
                <select id="premiseType" class="border p-1 rounded w-48">
                    <option value="Shop Only">Shop Only</option>
                    <option value="Godown Only">Godown Only</option>
                    <option value="Shop Cum Godown">Shop Cum Godown</option>
                </select>
            </div>
            <div class="flex items-center mb-2">
                <label class="w-40">Building Sum Insured (Rs.):</label>
                <input type="number" id="buildingSi" value="0" class="border p-1 rounded w-48" min="0">
            </div>
            <div class="flex items-center mb-2">
                <label class="w-40">Contents Sum Insured (Rs.):</label>
                <input type="number" id="contentsSi" value="0" class="border p-1 rounded w-48" min="0">
            </div>
            <!-- Section II: Burglary (Compulsory) -->
            <h2 class="text-lg font-bold mt-4">Section II: Burglary (Compulsory, SI = Contents SI)</h2>
            <!-- Manage Optional Sections -->
            <h2 class="text-lg font-bold mt-4">Manage Optional Sections</h2>
            <div class="flex items-center mb-2">
                <label class="w-40">Add Section:</label>
                <select id="sectionChoice" class="border p-1 rounded w-48">
                    <option value="">Select Section</option>
                    <option value="III">III: Cylinder In Transit</option>
                    <option value="IV">IV: Money Insurance</option>
                    <option value="V">V: Fidelity Guarantee</option>
                    <option value="VI">VI: Personal Accident</option>
                    <option value="VII">VII: Plate Glass</option>
                    <option value="VIII">VIII: Neon Signs</option>
                    <option value="IX">IX: Pedal Cycle/Van</option>
                    <option value="X">X: Public Liability</option>
                    <option value="XI">XI: Workmen Compensation</option>
                    <option value="Terrorism">Terrorism</option>
                </select>
                <button onclick="addSection()" class="ml-2 bg-blue-500 text-white px-4 py-1 rounded hover:bg-blue-600">Add Section</button>
            </div>
            <div class="flex items-center mb-2">
                <label class="w-40">Delete Section:</label>
                <select id="deleteSectionChoice" class="border p-1 rounded w-48">
                    <option value="">Select Section</option>
                </select>
                <button onclick="deleteSection()" class="ml-2 bg-red-500 text-white px-4 py-1 rounded hover:bg-red-600">Delete Section</button>
            </div>
            <!-- Dynamic Sections -->
            <div id="dynamicSections" class="mt-4"></div>
            <!-- Calculate Button -->
            <button onclick="calculatePremium()" class="mt-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Calculate Premium</button>
        </div>
    </div>

    <!-- Modal for Results -->
    <div id="resultModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-2xl">
            <h2 class="text-xl font-bold mb-4">Premium Calculation Results</h2>
            <div class="result-text" id="resultText"></div>
            <button onclick="closeModal()" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Close</button>
        </div>
    </div>

    <script>
        // Constants
        const SECTION_I_RATE = 2.25 / 1000;
        const SECTION_II_RATE = 1.0 / 1000;
        const SECTION_III_RATE = 5.0 / 1000;
        const SECTION_IV_RATE = 2.55 / 1000;
        const SECTION_V_RATE = 5.0 / 1000;
        const SECTION_VI_CUSTOMER_RATE = 300 / 1000;
        const SECTION_VI_CYLINDER_RATE = 30 / 1000;
        const SECTION_VII_RATE = 10.0 / 1000;
        const SECTION_VIII_RATE = 10.0 / 1000;
        const SECTION_IX_RATE = 10.0 / 1000;
        const SECTION_X_RATE = 5.0 / 1000;
        const SECTION_XI_RATE = 7.75 / 1000;
        const TERRORISM_RATE = 0.13 / 1000;
        const GST_RATE = 0.18;
        const MAX_SI = 50000000;
        const SECTION_VI_CUSTOMER_SI = 15000;

        let sections = {};

        function addSection() {
            const sectionChoice = document.getElementById('sectionChoice').value;
            if (!sectionChoice) {
                alert('Please select a section to add.');
                return;
            }
            if (sections[sectionChoice]) {
                alert('Section already added.');
                return;
            }

            const dynamicSections = document.getElementById('dynamicSections');
            const sectionDiv = document.createElement('div');
            sectionDiv.id = `section-${sectionChoice}`;
            sectionDiv.className = 'mb-4';
            sectionDiv.innerHTML = `<h3 class="text-md font-bold">${sectionChoice}: ${getSectionName(sectionChoice)}</h3>`;

            if (sectionChoice === 'III') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="cylinderTransit" onchange="toggleInput('cylinderTransitSi', this.checked)"> Cylinder In Transit
                        <label class="ml-4 w-32">Sum Insured (Rs.):</label>
                        <input type="number" id="cylinderTransitSi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>`;
            } else if (sectionChoice === 'IV') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="moneySafe" onchange="toggleInput('moneySafeSi', this.checked)"> Money In Safe/Cash Box
                        <label class="ml-4 w-32">Sum Insured (Rs.):</label>
                        <input type="number" id="moneySafeSi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="moneyTransit" onchange="toggleInput('moneyTransitSi', this.checked)"> Money In Transit
                        <label class="ml-4 w-32">Sum Insured (Rs.):</label>
                        <input type="number" id="moneyTransitSi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="moneyElsewhere" onchange="toggleInput('moneyElsewhereSi', this.checked)"> Money Elsewhere in Premises
                        <label class="ml-4 w-32">Sum Insured (Rs.):</label>
                        <input type="number" id="moneyElsewhereSi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>`;
            } else if (sectionChoice === 'V') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="fidelity" onchange="toggleInput('fidelitySi', this.checked)"> Fidelity Guarantee
                        <label class="ml-4 w-32">Sum Insured (Rs.):</label>
                        <input type="number" id="fidelitySi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>`;
            } else if (sectionChoice === 'VI') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <label class="w-36">PA Employee Premium (Rs.):</label>
                        <input type="number" id="paEmployeePremium" value="0" class="border p-1 rounded w-48" min="0">
                    </div>
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="paCustomer" onchange="togglePaCustomer(this.checked)"> PA to Customer (SI 15,000)
                        <label class="ml-4 w-24">Calculate By:</label>
                        <select id="paCustomerOption" class="border p-1 rounded w-24" disabled>
                            <option value="Customers">Customers</option>
                            <option value="Cylinders">Cylinders</option>
                        </select>
                        <label class="ml-4 w-16">Count:</label>
                        <input type="number" id="paCustomerCount" value="0" class="border p-1 rounded w-24" min="0" disabled>
                    </div>`;
            } else if (sectionChoice === 'VII') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="plateGlass" onchange="toggleInput('plateGlassSi', this.checked)"> Plate Glass
                        <label class="ml-4 w-32">Sum Insured (Rs.):</label>
                        <input type="number" id="plateGlassSi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>`;
            } else if (sectionChoice === 'VIII') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="neonSign" onchange="toggleInput('neonSignSi', this.checked)"> Neon Signs
                        <label class="ml-4 w-32">Sum Insured (Rs.):</label>
                        <input type="number" id="neonSignSi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>`;
            } else if (sectionChoice === 'IX') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="pedalCycle" onchange="toggleInput('pedalCycleSi', this.checked)"> Pedal Cycle/Van
                        <label class="ml-4 w-32">Sum Insured (Rs.):</label>
                        <input type="number" id="pedalCycleSi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>`;
            } else if (sectionChoice === 'X') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="publicLiability" onchange="toggleInput('publicLiabilitySi', this.checked)"> Public Liability
                        <label class="ml-4 w-32">Sum Insured (Rs.):</label>
                        <input type="number" id="publicLiabilitySi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>`;
            } else if (sectionChoice === 'XI') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="wc" onchange="toggleInput('wcSi', this.checked)"> Workmen Compensation
                        <label class="ml-4 w-32">Total Wages Sum Insured (Rs.):</label>
                        <input type="number" id="wcSi" value="0" class="border p-1 rounded w-48" min="0" disabled>
                    </div>`;
            } else if (sectionChoice === 'Terrorism') {
                sectionDiv.innerHTML += `
                    <div class="flex items-center mb-2 ml-4">
                        <input type="checkbox" id="terrorism"> Terrorism (SI = Sec I + Neon Signs + Pedal Cycle/Van)
                    </div>`;
            }

            dynamicSections.appendChild(sectionDiv);
            sections[sectionChoice] = true;
            updateDeleteCombobox();
        }

        function toggleInput(inputId, checked) {
            document.getElementById(inputId).disabled = !checked;
        }

        function togglePaCustomer(checked) {
            document.getElementById('paCustomerOption').disabled = !checked;
            document.getElementById('paCustomerCount').disabled = !checked;
        }

        function deleteSection() {
            const sectionChoice = document.getElementById('deleteSectionChoice').value;
            if (!sectionChoice) {
                alert('Please select a section to delete.');
                return;
            }
            const sectionDiv = document.getElementById(`section-${sectionChoice}`);
            if (sectionDiv) {
                sectionDiv.remove();
                delete sections[sectionChoice];
                updateDeleteCombobox();
            }
        }

        function getSectionName(sectionId) {
            const names = {
                'III': 'Cylinder In Transit',
                'IV': 'Money Insurance',
                'V': 'Fidelity Guarantee',
                'VI': 'Personal Accident',
                'VII': 'Plate Glass',
                'VIII': 'Neon Signs',
                'IX': 'Pedal Cycle/Van',
                'X': 'Public Liability',
                'XI': 'Workmen Compensation',
                'Terrorism': 'Terrorism'
            };
            return names[sectionId] || sectionId;
        }

        function updateDeleteCombobox() {
            const deleteSelect = document.getElementById('deleteSectionChoice');
            deleteSelect.innerHTML = '<option value="">Select Section</option>';
            for (let sectionId in sections) {
                const option = document.createElement('option');
                option.value = sectionId;
                option.textContent = `${sectionId}: ${getSectionName(sectionId)}`;
                deleteSelect.appendChild(option);
            }
        }

        function validateSi(value, label, maxSi = MAX_SI) {
            const num = parseFloat(value);
            if (isNaN(num)) {
                alert(`Enter a valid number for ${label}.`);
                return null;
            }
            if (num < 0) {
                alert(`${label} cannot be negative.`);
                return null;
            }
            if (num > maxSi) {
                alert(`For such a large Risk, Pls contact to Office for proper rate, discounts & eligibility: ${label} exceeds Rs. ${maxSi.toLocaleString()}.`);
                return null;
            }
            return num;
        }

        function validateCount(value, label) {
            const num = parseFloat(value);
            if (isNaN(num)) {
                alert(`Enter a valid number for ${label}.`);
                return null;
            }
            if (num < 0) {
                alert(`${label} cannot be negative.`);
                return null;
            }
            return num;
        }

        function calculatePremium() {
            let result = "=== Premium Calculation ===\n\n";
            let totalPremium = 0;
            let discountablePremium = 0;

            // Section I
            const buildingSi = validateSi(document.getElementById('buildingSi').value, 'Building Sum Insured');
            if (buildingSi === null) return;
            const contentsSi = validateSi(document.getElementById('contentsSi').value, 'Contents Sum Insured');
            if (contentsSi === null) return;
            const sectionISi = buildingSi + contentsSi;
            const premiseType = document.getElementById('premiseType').value;
            result += `Section I: Fire & Allied Perils (${premiseType})\n`;
            const buildingPremium = buildingSi * SECTION_I_RATE;
            result += `  Building\n    Sum Insured: Rs ${buildingSi.toLocaleString()}\tPremium: Rs ${buildingPremium.toFixed(2)}\n`;
            const contentsPremium = contentsSi * SECTION_I_RATE;
            result += `  Contents\n    Sum Insured: Rs ${contentsSi.toLocaleString()}\tPremium: Rs ${contentsPremium.toFixed(2)}\n`;
            const sectionIPremium = buildingPremium + contentsPremium;
            totalPremium += sectionIPremium;

            // Section II
            result += "\nSection II: Burglary\n";
            const sectionIISi = contentsSi;
            const sectionIIPremium = sectionIISi * SECTION_II_RATE;
            totalPremium += sectionIIPremium;
            discountablePremium += sectionIIPremium;
            result += `  Sum Insured: Rs ${sectionIISi.toLocaleString()}\tPremium: Rs ${sectionIIPremium.toFixed(2)}\n`;

            // Optional Sections
            let sectionCount = Object.keys(sections).filter(s => s !== 'Terrorism').length;
            let plateGlassSi = 0;
            let neonSignSi = 0;
            let pedalCycleSi = 0;

            const sortedSections = Object.keys(sections).sort((a, b) => a === 'Terrorism' ? 1 : b === 'Terrorism' ? -1 : a.localeCompare(b));
            for (let sectionId of sortedSections) {
                if (sectionId === 'III') {
                    result += "\nSection III: Cylinder In Transit\n";
                    const cylinderTransit = document.getElementById('cylinderTransit')?.checked;
                    if (cylinderTransit) {
                        const cylinderSi = validateSi(document.getElementById('cylinderTransitSi').value, 'Cylinder In Transit Sum Insured');
                        if (cylinderSi === null) return;
                        const cylinderPremium = cylinderSi * SECTION_III_RATE;
                        totalPremium += cylinderPremium;
                        discountablePremium += cylinderPremium;
                        result += `  Cylinder In Transit\n    Sum Insured: Rs ${cylinderSi.toLocaleString()}\tPremium: Rs ${cylinderPremium.toFixed(2)}\n`;
                    } else {
                        result += "  Cylinder In Transit: Not Selected\n";
                    }
                } else if (sectionId === 'IV') {
                    result += "\nSection IV: Money Insurance\n";
                    let moneyPremium = 0;
                    if (document.getElementById('moneySafe')?.checked) {
                        const safeSi = validateSi(document.getElementById('moneySafeSi').value, 'Money In Safe/Cash Box');
                        if (safeSi === null) return;
                        const safePremium = safeSi * SECTION_IV_RATE;
                        moneyPremium += safePremium;
                        result += `  Money In Safe/Cash Box\n    Sum Insured: Rs ${safeSi.toLocaleString()}\tPremium: Rs ${safePremium.toFixed(2)}\n`;
                    } else {
                        result += "  Money In Safe/Cash Box: Not Selected\n";
                    }
                    if (document.getElementById('moneyTransit')?.checked) {
                        const transitSi = validateSi(document.getElementById('moneyTransitSi').value, 'Money In Transit');
                        if (transitSi === null) return;
                        const transitPremium = transitSi * SECTION_IV_RATE;
                        moneyPremium += transitPremium;
                        result += `  Money In Transit\n    Sum Insured: Rs ${transitSi.toLocaleString()}\tPremium: Rs ${transitPremium.toFixed(2)}\n`;
                    } else {
                        result += "  Money In Transit: Not Selected\n";
                    }
                    if (document.getElementById('moneyElsewhere')?.checked) {
                        const elsewhereSi = validateSi(document.getElementById('moneyElsewhereSi').value, 'Money Elsewhere Sum Insured');
                        if (elsewhereSi === null) return;
                        const elsewherePremium = elsewhereSi * SECTION_IV_RATE;
                        moneyPremium += elsewherePremium;
                        result += `  Money Elsewhere in Premises\n    Sum Insured: Rs ${elsewhereSi.toLocaleString()}\tPremium: Rs ${elsewherePremium.toFixed(2)}\n`;
                    } else {
                        result += "  Money Elsewhere in Premises: Not Selected\n";
                    }
                    totalPremium += moneyPremium;
                    discountablePremium += moneyPremium;
                } else if (sectionId === 'V') {
                    result += "\nSection V: Fidelity Guarantee\n";
                    if (document.getElementById('fidelity')?.checked) {
                        const fidelitySi = validateSi(document.getElementById('fidelitySi').value, 'Fidelity Guarantee Sum Insured');
                        if (fidelitySi === null) return;
                        const fidelityPremium = fidelitySi * SECTION_V_RATE;
                        totalPremium += fidelityPremium;
                        discountablePremium += fidelityPremium;
                        result += `  Fidelity Guarantee\n    Sum Insured: Rs ${fidelitySi.toLocaleString()}\tPremium: Rs ${fidelityPremium.toFixed(2)}\n`;
                    } else {
                        result += "  Fidelity Guarantee: Not Selected\n";
                    }
                } else if (sectionId === 'VI') {
                    result += "\nSection VI: Personal Accident\n";
                    let paPremium = 0;
                    const paEmployeePremium = parseFloat(document.getElementById('paEmployeePremium').value);
                    if (isNaN(paEmployeePremium)) {
                        alert('Enter a valid number for PA Employee Premium.');
                        return;
                    }
                    if (paEmployeePremium < 0) {
                        alert('PA Employee Premium cannot be negative.');
                        return;
                    }
                    paPremium += paEmployeePremium;
                    result += `  PA for Employee\n    Premium: Rs ${paEmployeePremium.toFixed(2)}\n`;
                    if (document.getElementById('paCustomer')?.checked) {
                        const count = validateCount(document.getElementById('paCustomerCount').value, `Number of ${document.getElementById('paCustomerOption').value}`);
                        if (count === null) return;
                        const rate = document.getElementById('paCustomerOption').value === 'Customers' ? SECTION_VI_CUSTOMER_RATE : SECTION_VI_CYLINDER_RATE;
                        const customerPremium = count * rate;
                        paPremium += customerPremium;
                        result += `  PA to Customer (By ${document.getElementById('paCustomerOption').value})\n    Sum Insured: Rs ${SECTION_VI_CUSTOMER_SI.toLocaleString()}\tCount: ${count.toLocaleString()}\tPremium: Rs ${customerPremium.toFixed(2)}\n`;
                    } else {
                        result += "  PA to Customer: Not Selected\n";
                    }
                    totalPremium += paPremium;
                } else if (sectionId === 'VII') {
                    result += "\nSection VII: Plate Glass\n";
                    if (document.getElementById('plateGlass')?.checked) {
                        plateGlassSi = validateSi(document.getElementById('plateGlassSi').value, 'Plate Glass Sum Insured');
                        if (plateGlassSi === null) return;
                        const plateGlassPremium = plateGlassSi * SECTION_VII_RATE;
                        totalPremium += plateGlassPremium;
                        discountablePremium += plateGlassPremium;
                        result += `  Plate Glass\n    Sum Insured: Rs ${plateGlassSi.toLocaleString()}\tPremium: Rs ${plateGlassPremium.toFixed(2)}\n`;
                    } else {
                        result += "  Plate Glass: Not Selected\n";
                        plateGlassSi = 0;
                    }
                } else if (sectionId === 'VIII') {
                    result += "\nSection VIII: Neon Signs\n";
                    if (document.getElementById('neonSign')?.checked) {
                        neonSignSi = validateSi(document.getElementById('neonSignSi').value, 'Neon Signs Sum Insured');
                        if (neonSignSi === null) return;
                        const neonSignPremium = neonSignSi * SECTION_VIII_RATE;
                        totalPremium += neonSignPremium;
                        discountablePremium += neonSignPremium;
                        result += `  Neon Signs\n    Sum Insured: Rs ${neonSignSi.toLocaleString()}\tPremium: Rs ${neonSignPremium.toFixed(2)}\n`;
                    } else {
                        result += "  Neon Signs: Not Selected\n";
                        neonSignSi = 0;
                    }
                } else if (sectionId === 'IX') {
                    result += "\nSection IX: Pedal Cycle/Van\n";
                    if (document.getElementById('pedalCycle')?.checked) {
                        pedalCycleSi = validateSi(document.getElementById('pedalCycleSi').value, 'Pedal Cycle/Van Sum Insured');
                        if (pedalCycleSi === null) return;
                        const pedalCyclePremium = pedalCycleSi * SECTION_IX_RATE;
                        totalPremium += pedalCyclePremium;
                        discountablePremium += pedalCyclePremium;
                        result += `  Pedal Cycle/Van\n    Sum Insured: Rs ${pedalCycleSi.toLocaleString()}\tPremium: Rs ${pedalCyclePremium.toFixed(2)}\n`;
                    } else {
                        result += "  Pedal Cycle/Van: Not Selected\n";
                        pedalCycleSi = 0;
                    }
                } else if (sectionId === 'X') {
                    result += "\nSection X: Public Liability\n";
                    if (document.getElementById('publicLiability')?.checked) {
                        const publicLiabilitySi = validateSi(document.getElementById('publicLiabilitySi').value, 'Public Liability Sum Insured');
                        if (publicLiabilitySi === null) return;
                        const publicLiabilityPremium = publicLiabilitySi * SECTION_X_RATE;
                        totalPremium += publicLiabilityPremium;
                        discountablePremium += publicLiabilityPremium;
                        result += `  Public Liability\n    Sum Insured: Rs ${publicLiabilitySi.toLocaleString()}\tPremium: Rs ${publicLiabilityPremium.toFixed(2)}\n`;
                    } else {
                        result += "  Public Liability: Not Selected\n";
                    }
                } else if (sectionId === 'XI') {
                    result += "\nSection XI: Workmen Compensation\n";
                    if (document.getElementById('wc')?.checked) {
                        const wcSi = validateSi(document.getElementById('wcSi').value, 'Workmen Compensation Sum Insured');
                        if (wcSi === null) return;
                        const wcPremium = wcSi * SECTION_XI_RATE;
                        totalPremium += wcPremium;
                        discountablePremium += wcPremium;
                        result += `  Workmen Compensation\n    Sum Insured: Rs ${wcSi.toLocaleString()}\tPremium: Rs ${wcPremium.toFixed(2)}\n`;
                    } else {
                        result += "  Workmen Compensation: Not Selected\n";
                    }
                } else if (sectionId === 'Terrorism') {
                    result += "\nTerrorism\n";
                    if (document.getElementById('terrorism')?.checked) {
                        const terrorismSi = sectionISi + neonSignSi + pedalCycleSi;
                        const terrorismPremium = terrorismSi * TERRORISM_RATE;
                        totalPremium += terrorismPremium;
                        result += `  Terrorism\n    Sum Insured: Rs ${terrorismSi.toLocaleString()}\tPremium: Rs ${terrorismPremium.toFixed(2)}\n`;
                    } else {
                        result += "  Terrorism: Not Selected\n";
                    }
                }
            }

            // Group Discount
            result += "\nGroup Discount\n";
            let discount = 0;
            if (sectionCount === 5) {
                discount = discountablePremium * 0.15;
                result += `  15% Group Discount (5 Optional Sections): Rs ${discount.toFixed(2)}\n`;
            } else if (sectionCount >= 6) {
                discount = discountablePremium * 0.20;
                result += `  20% Group Discount (6+ Optional Sections): Rs ${discount.toFixed(2)}\n`;
            } else {
                result += "  No Group Discount Applied\n";
            }
            totalPremium -= discount;
            result += `\nTotal Premium After Discount: Rs ${totalPremium.toFixed(2)}\n`;

            // GST Calculation
            const gstAmount = totalPremium * GST_RATE;
            const totalPremiumWithGst = totalPremium + gstAmount;
            result += `GST @ 18%: Rs ${gstAmount.toFixed(2)}\n`;
            result += `Total Premium Including GST: Rs ${totalPremiumWithGst.toFixed(2)}\n`;

            // Display Results
            document.getElementById('resultText').innerText = result;
            document.getElementById('resultModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('resultModal').classList.add('hidden');
        }
    </script>
</body>
</html>